(declare-const b1b2 Bool)
(declare-const b1b3 Bool)
(declare-const b1b4 Bool)
(declare-const b1b5 Bool)
(declare-const b2b1 Bool)
(declare-const b2b3 Bool)
(declare-const b2b5 Bool)
(declare-const b2b4 Bool)
(declare-const b3b2 Bool)
(declare-const b3b1 Bool)
(declare-const b3b4 Bool)
(declare-const b3b5 Bool)
(declare-const b4b1 Bool)
(declare-const b4b2 Bool)
(declare-const b4b3 Bool)
(declare-const b4b5 Bool)
(declare-const b5b2 Bool)
(declare-const b5b1 Bool)
(declare-const b5b3 Bool)
(declare-const b5b4 Bool)
;; Every student should pair with one of its perferenced student
(assert-soft (or b1b2 b1b3 b1b4 ))
(assert-soft (or b2b1 b2b3 b2b5 ))
(assert-soft (or b3b2 b3b1 ))
(assert-soft (or b4b1 ))
(assert-soft (or b5b2 ))
;; There shouldn't be duplicate between group
(assert (not (and b1b2 b1b3)))
(assert (not (and b1b2 b1b4)))
(assert (not (and b1b2 b2b1)))
(assert (not (and b1b2 b3b1)))
(assert (not (and b1b2 b4b1)))
(assert (not (and b1b3 b1b4)))
(assert (not (and b1b3 b2b1)))
(assert (not (and b1b3 b3b1)))
(assert (not (and b1b3 b4b1)))
(assert (not (and b1b4 b2b1)))
(assert (not (and b1b4 b3b1)))
(assert (not (and b1b4 b4b1)))
(assert (not (and b2b1 b3b1)))
(assert (not (and b2b1 b4b1)))
(assert (not (and b3b1 b4b1)))
(assert (not (and b2b1 b2b3)))
(assert (not (and b2b1 b2b5)))
(assert (not (and b2b1 b1b2)))
(assert (not (and b2b1 b3b2)))
(assert (not (and b2b1 b5b2)))
(assert (not (and b2b3 b2b5)))
(assert (not (and b2b3 b1b2)))
(assert (not (and b2b3 b3b2)))
(assert (not (and b2b3 b5b2)))
(assert (not (and b2b5 b1b2)))
(assert (not (and b2b5 b3b2)))
(assert (not (and b2b5 b5b2)))
(assert (not (and b1b2 b3b2)))
(assert (not (and b1b2 b5b2)))
(assert (not (and b3b2 b5b2)))
(assert (not (and b3b2 b3b1)))
(assert (not (and b3b2 b1b3)))
(assert (not (and b3b2 b2b3)))
(assert (not (and b3b1 b1b3)))
(assert (not (and b3b1 b2b3)))
(assert (not (and b1b3 b2b3)))
(assert (not (and b4b1 b1b4)))
(assert (not (and b5b2 b2b5)))
;; Make sure the remaining student pairs up
(assert (or b1b2 b1b3 b1b4 b1b5 b2b1 b3b1 b4b1 b5b1 ))
(assert (or b1b2 b2b1 b2b3 b2b4 b2b5 b3b2 b4b2 b5b2 ))
(assert (or b1b3 b2b3 b3b1 b3b2 b3b4 b3b5 b4b3 b5b3 ))
(assert (or b1b4 b2b4 b3b4 b4b1 b4b2 b4b3 b4b5 b5b4 ))
(assert (or b1b5 b2b5 b3b5 b4b5 b5b1 b5b2 b5b3 b5b4 ))
(check-sat)
(get-model)
