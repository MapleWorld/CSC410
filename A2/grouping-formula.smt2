;; Declaring variables
(declare-const b1b2 Int)
(declare-const b1b3 Int)
(declare-const b1b4 Int)
(declare-const b1b5 Int)
(declare-const b2b1 Int)
(declare-const b2b3 Int)
(declare-const b2b5 Int)
(declare-const b2b4 Int)
(declare-const b3b2 Int)
(declare-const b3b1 Int)
(declare-const b3b4 Int)
(declare-const b3b5 Int)
(declare-const b4b1 Int)
(declare-const b4b2 Int)
(declare-const b4b3 Int)
(declare-const b4b5 Int)
(declare-const b5b2 Int)
(declare-const b5b1 Int)
(declare-const b5b3 Int)
(declare-const b5b4 Int)
;; Every group should either have indicator zero or one
(assert (and (>= b1b2 0)(>= b2b1 0)(>= b1b3 0)(>= b3b1 0)(>= b1b4 0)(>= b4b1 0)(>= b1b5 0)(>= b5b1 0)))
(assert (and (>= b2b1 0)(>= b1b2 0)(>= b2b3 0)(>= b3b2 0)(>= b2b4 0)(>= b4b2 0)(>= b2b5 0)(>= b5b2 0)))
(assert (and (>= b3b1 0)(>= b1b3 0)(>= b3b2 0)(>= b2b3 0)(>= b3b4 0)(>= b4b3 0)(>= b3b5 0)(>= b5b3 0)))
(assert (and (>= b4b1 0)(>= b1b4 0)(>= b4b2 0)(>= b2b4 0)(>= b4b3 0)(>= b3b4 0)(>= b4b5 0)(>= b5b4 0)))
(assert (and (>= b5b1 0)(>= b1b5 0)(>= b5b2 0)(>= b2b5 0)(>= b5b3 0)(>= b3b5 0)(>= b5b4 0)(>= b4b5 0)))
;; Each Student must belong to one group only
(assert (<= (+ b1b2 b2b1 b1b3 b3b1 b1b4 b4b1 b1b5 b5b1) 1))
(assert (<= (+ b2b1 b1b2 b2b3 b3b2 b2b4 b4b2 b2b5 b5b2) 1))
(assert (<= (+ b3b1 b1b3 b3b2 b2b3 b3b4 b4b3 b3b5 b5b3) 1))
(assert (<= (+ b4b1 b1b4 b4b2 b2b4 b4b3 b3b4 b4b5 b5b4) 1))
(assert (<= (+ b5b1 b1b5 b5b2 b2b5 b5b3 b3b5 b5b4 b4b5) 1))
;; Maximize the group preference
(maximize (+ b1b2 b1b3 b1b4 b2b1 b2b3 b2b5 b3b2 b3b1 b4b1 b5b2 ))
;; Maximize the number of groups formed
(maximize (+ b1b2 b2b1 b1b3 b3b1 b1b4 b4b1 b1b5 b5b1))
(maximize (+ b2b1 b1b2 b2b3 b3b2 b2b4 b4b2 b2b5 b5b2))
(maximize (+ b3b1 b1b3 b3b2 b2b3 b3b4 b4b3 b3b5 b5b3))
(maximize (+ b4b1 b1b4 b4b2 b2b4 b4b3 b3b4 b4b5 b5b4))
(maximize (+ b5b1 b1b5 b5b2 b2b5 b5b3 b3b5 b5b4 b4b5))
(check-sat)
(get-model)
